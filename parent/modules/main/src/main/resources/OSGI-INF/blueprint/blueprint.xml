<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">
	
	<bean class="fr.sekaijin.osgi.web.module.tracker.ModuleTracker"
		init-method="start" destroy-method="close">
		<argument type="org.osgi.framework.BundleContext" ref="blueprintBundleContext" />
		<argument type="java.lang.Class" value="fr.sekaijin.osgi.web.main.api.IModule" />
		<argument type="java.lang.Class" value="fr.sekaijin.osgi.web.main.tracker.ModuleTrackerCustomizer" />
	</bean>

	<service interface="org.ops4j.pax.web.extender.whiteboard.HttpContextMapping">
		<bean
			class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultHttpContextMapping">
			<property name="httpContextId" value="httpContext" />
			<property name="path" value="${web.context}" />
		</bean>
	</service>

	<service interface="org.ops4j.pax.web.extender.whiteboard.WelcomeFileMapping">
		<bean
			class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultWelcomeFileMapping">
			<property name="httpContextId" value="httpContext" />
			<property name="redirect" value="false" />
			<property name="welcomeFiles">
				<array>
					<value>index.jsp</value>
					<value>index.html</value>
				</array>
			</property>
		</bean>
	</service>

	<service interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
		<bean
			class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
			<property name="httpContextId" value="httpContext" />
			<property name="alias" value="/${module.name}/static" /> <!-- http path -->
			<property name="path" value="/local" /> <!--Local Folder within jar -->
		</bean>
	</service>

	<service interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
		<bean
			class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
			<property name="httpContextId" value="httpContext" />
			<property name="alias" value="/" /> <!-- http path -->
			<property name="path" value="/" /> <!--Local Folder within jar -->
		</bean>
	</service>

	<service interface="org.ops4j.pax.web.extender.whiteboard.ErrorPageMapping">
		<bean
			class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultErrorPageMapping">
			<property name="httpContextId" value="httpContext" />
			<property name="error" value="404" />
			<property name="location" value="/404.html" />
		</bean>
	</service>

	<service interface="org.ops4j.pax.web.extender.whiteboard.ErrorPageMapping">
		<bean
			class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultErrorPageMapping">
			<property name="httpContextId" value="httpContext" />
			<property name="error" value="403" />
			<property name="location" value="/404.html" />
		</bean>
	</service>

	<service interface="org.ops4j.pax.web.extender.whiteboard.JspMapping">
		<bean
			class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultJspMapping">
			<property name="httpContextId" value="httpContext" />
			<property name="urlPatterns">
				<array>
					<value>index.jsp</value>
				</array>
			</property>
		</bean>
	</service>
</blueprint>